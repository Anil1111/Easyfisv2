<!-- header navbar menu -->
<header>
    <nav id="mainNav" class="navbar navbar-default userAuthentication navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand page-scroll" href="/Software">
                    <img src="~/Images/logo/easyfislogo.png" class="softwarelogo" />
                </a>
                <button id="c-button--slide-left" class="btn-menu-link"><i class="fa fa-bars fa-2x"></i></button>
            </div>
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li>
                    </li>
                </ul>
                @Html.Partial("_LoginPartial")
            </div>
        </div>
    </nav>
</header>

<!-- sidebar collapse menu -->
<nav id="c-menu--slide-left" class="c-menu c-menu--slide-left">
    <div class="panel-group panel-group-menu" id="accordion">
        @{
            var host = Request.Url.Host;
        }

        @if (host.Equals("localhost"))
        {
            <div class="panel panel-default panel-side">
                <div class="panel-heading panel-heading-menu">
                    <div class="image-custom">
                        <img src="~/Images/innosoft/innosoft.png" height="50" />
                    </div>
                </div>
            </div>
        }

        @if (host.Equals("www.easyfis.com"))
        {
            <div class="panel panel-default panel-side">
                <div class="panel-heading panel-heading-menu">
                    <div class="image-custom">
                        <img src="~/Images/logo/easyfislogo.png" height="50" />
                    </div>
                </div>
            </div>
        }

        @if (host.Equals("innosoft.easyfis.com"))
        {
            <div class="panel panel-default panel-side">
                <div class="panel-heading panel-heading-menu">
                    <div class="image-custom">
                        <img src="~/Images/innosoft/innosoft.png" height="50" />
                    </div>
                </div>
            </div>
        }

        @if (host.Equals("abomar.easyfis.com"))
        {
            <div class="panel panel-default panel-side">
                <div class="panel-heading panel-heading-menu">
                    <div class="image-custom">
                        <img src="~/Images/abomar/abomar-logo.png" />
                    </div>
                </div>
            </div>
        }

        @if (host.Equals("tambayan.easyfis.com"))
        {

        }

        <div class="panel panel-default panel-side">
            <div class="panel-heading panel-heading-menu">
                <a href="#index" class="panel-link-menu c-menu__close">
                    <h4 class="panel-title">
                        <i class="fa fa-arrow-left fa-fw"></i> &nbsp; Close Menu
                    </h4>
                </a>
            </div>
        </div>
        <div class="panel panel-default panel-side">
            <div class="panel-heading panel-heading-menu">
                <a href="/Manage" class="panel-link-menu">
                    <h4 class="panel-title">
                        <i class="fa fa-gear fa-fw"></i> &nbsp; Manage Settings
                    </h4>
                </a>
            </div>
        </div>
        <div class="panel panel-default panel-side">
            <div class="panel-heading panel-heading-menu">
                <a href="/Software" class="panel-link-menu">
                    <h4 class="panel-title">
                        <i class="fa fa-dashboard fa-fw"></i> &nbsp; Main Menu
                    </h4>
                </a>
            </div>
        </div>
        <div class="panel panel-default panel-side">
            <div class="panel-heading panel-heading-menu">
                <a data-toggle="collapse" data-parent="#accordion" href="#collapse1" class="panel-link-menu">
                    <h4 class="panel-title">
                        <i class="fa fa-wrench fa-fw"></i> &nbsp; Setup <i class="fa fa-chevron-down pull-right"></i>
                    </h4>
                </a>
            </div>
            <div id="collapse1" class="panel-collapse collapse panel-collapse-menu">
                <div class="panel-body panel-body-menu">
                    <ul class="panel-list-menu">
                        <li><a href="/Software/Supplier"><img src="~/Images/svgIcons/businessman.svg" class="svg-icon-style-side-menu" /> Supplier</a></li>
                        <li><a href="/Software/Customer"><img src="~/Images/svgIcons/conference_call.svg" class="svg-icon-style-side-menu" /> Customer</a></li>
                        <li><a href="/Software/Item"><img src="~/Images/svgIcons/paid.svg" class="svg-icon-style-side-menu" /> Item</a></li>
                        <li><a href="/Software/Bank"><img src="~/Images/svgIcons/library.svg" class="svg-icon-style-side-menu" /> Bank</a></li>
                        <li><a href="/Software/ChartOfAccounts"><img src="~/Images/svgIcons/todo_list.svg" class="svg-icon-style-side-menu" /> Chart of Accounts</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="panel panel-default panel-side">
            <div class="panel-heading panel-heading-menu">
                <a data-toggle="collapse" data-parent="#accordion" href="#collapse2" class="panel-link-menu">
                    <h4 class="panel-title">
                        <i class="fa fa-desktop fa-fw"></i> &nbsp; System <i class="fa fa-chevron-down pull-right"></i>
                    </h4>
                </a>
            </div>
            <div id="collapse2" class="panel-collapse collapse  panel-collapse-menu">
                <div class="panel-body">
                    <ul>
                        <li><a href="/Software/Company"><img src="~/Images/svgIcons/organization.svg" class="svg-icon-style-side-menu" /> Company</a></li>
                        <li><a href="/Software/Users"><img src="~/Images/svgIcons/key.svg" class="svg-icon-style-side-menu" /> User</a></li>
                        <li><a href="/Software/SystemTables"><img src="~/Images/svgIcons/grid.svg" class="svg-icon-style-side-menu" /> System Tables</a></li>
                        <li><a href="#" onclick="menuSystemItemQuery_OnClick()"><img src="~/Images/svgIcons/paid.svg" class="svg-icon-style-side-menu" /> Item Query</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="panel panel-default panel-side">
            <div class="panel-heading panel-heading-menu">
                <a data-toggle="collapse" data-parent="#accordion" href="#collapse3" class="panel-link-menu">
                    <h4 class="panel-title">
                        <i class="fa fa-line-chart fa-fw"></i> &nbsp; Activity <i class="fa fa-chevron-down pull-right"></i>
                    </h4>
                </a>
            </div>
            <div id="collapse3" class="panel-collapse collapse panel-collapse-menu">
                <div class="panel-body">
                    <ul>
                        <li><a href="/Software/PurchaseOrder"><img src="~/Images/svgIcons/inspection.svg" class="svg-icon-style-side-menu" /> Purchase Order</a></li>
                        <li><a href="/Software/ReceivingReceipt"><img src="~/Images/svgIcons/shipped.svg" class="svg-icon-style-side-menu" /> Receiving Receipt</a></li>
                        <li><a href="/Software/Sales"><img src="~/Images/svgIcons/approval.svg" class="svg-icon-style-side-menu" /> Sales</a></li>
                        <li><a href="/Software/Disbursement"><img src="~/Images/svgIcons/money_transfer.svg" class="svg-icon-style-side-menu" /> Disbursement</a></li>
                        <li><a href="/Software/Collection"><img src="~/Images/svgIcons/sales_performance.svg" class="svg-icon-style-side-menu" /> Collection</a></li>
                        <li><a href="/Software/StockIn"><img src="~/Images/svgIcons/internal.svg" class="svg-icon-style-side-menu" /> Stock-In</a></li>
                        <li><a href="/Software/StockOut"><img src="~/Images/svgIcons/external.svg" class="svg-icon-style-side-menu" /> Stock-Out</a></li>
                        <li><a href="/Software/StockTransfer"><img src="~/Images/svgIcons/refresh.svg" class="svg-icon-style-side-menu" /> Stock Transfer</a></li>
                        <li><a href="/Software/StockCount"><img src="~/Images/svgIcons/kindle.svg" class="svg-icon-style-side-menu" /> Stock Count</a></li>
                        <li><a href="/Software/JournalVoucher"><img src="~/Images/svgIcons/rules.svg" class="svg-icon-style-side-menu" /> Journal Voucher</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="panel panel-default panel-side">
            <div class="panel-heading panel-heading-menu">
                <a data-toggle="collapse" data-parent="#accordion" href="#collapse4" class="panel-link-menu">
                    <h4 class="panel-title">
                        <i class="fa fa-print fa-fw"></i> &nbsp; Reports <i class="fa fa-chevron-down pull-right"></i>
                    </h4>
                </a>
            </div>
            <div id="collapse4" class="panel-collapse collapse panel-collapse-menu">
                <div class="panel-body">
                    <ul>
                        <li><a href="/Software/AccountsPayable"><img src="~/Images/svgIcons/print.svg" class="svg-icon-style-side-menu" /> Accounts Payable</a></li>
                        <li><a href="/Software/AccountsReceivable"><img src="~/Images/svgIcons/print.svg" class="svg-icon-style-side-menu" /> Accounts Receivable</a></li>
                        <li><a href="/Software/Inventory"><img src="~/Images/svgIcons/print.svg" class="svg-icon-style-side-menu" /> Inventory Report</a></li>
                        <li><a href="/Software/FinancialStatements"><img src="~/Images/svgIcons/print.svg" class="svg-icon-style-side-menu" /> Financial Statements</a></li>
                        <li><a href="/Software/BankReconciliation"><img src="~/Images/svgIcons/print.svg" class="svg-icon-style-side-menu" /> Bank Reconciliation</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>

<!-- modal logout confirmation -->
<div class="modal fade" id="modalLogout" role="dialog">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Logout</h4>
            </div>
            <div class="modal-body">                
                Are you sure you want to logout?
            </div>
            <div class="modal-footer">
                <a href="javascript:document.getElementById('logoutForm').submit()" class="btn btn-primary"><i class="fa fa-power-off fa-fw"></i> Logout</a>
                <button class="btn btn-danger" data-dismiss="modal"><i class="fa fa-close fa-fw"></i> Cancel</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="userBranchesModal" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">User Branch</h4>
            </div>
            <div class="modal-body">
                <center>
                    <span id="loadingUserBranches"></span>
                </center>
                <div id="userBranchContent">
                    <form class="form-horizontal" role="form">
                        <div class="form-group">
                            <label class="control-label col-sm-4">Branch</label>
                            <div class="col-sm-8">
                                <div class="comboBox-wide" id="cboUserBranches"></div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="updateUserBranch" onclick="updateUserBranchOnclick()"><i class="fa fa-save fa-fw"></i> Update</button>
                <button class="btn btn-danger" id="closeUserBranch" data-dismiss="modal"><i class="fa fa-close fa-fw"></i> Close</button>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="systemItemQueryModal" role="dialog">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">

            <div class="modal-header">
                <h4 class="modal-title" id="systemItemQueryModalLabel">Item Query</h4>
            </div>

            <div class="modal-body">
                
                <ul class="nav nav-tabs" role="tablist" id="systemItemQueryTab">
                    <li role="presentation" class="active"><a data-toggle="tab" href="#systemItemInventory" id="systemItemInventoryId">Inventory Items</a></li>
                    <li role="presentation"><a data-toggle="tab" href="#systemItemNonInventory" id="systemItemNonInventoryId">Non-Inventory Items</a></li>
                    <li role="presentation"><a data-toggle="tab" href="#systemItemPackage" id="systemItemPackageId">Package Items</a></li>
                </ul>

                <br />

                <div class="tab-content">

                    <div id="systemItemInventory" class="tab-pane fade in active">
                        <center>
                            <span id="loadingSystemItemInventory"></span>
                        </center>
                        <div id="systemItemInventoryGridDetail">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <div class="input-group  ">
                                        <span class="input-group-addon"><i class="fa fa-search"></i></span>
                                        <input type="text" class="form-control " id="searchSystemItemInventory" placeholder="Search...">
                                    </div>
                                </div>
                                <div class="panel-body">
                                    <div id="systemItemInventoryFlexGrid" class="grid" style="max-height: 250px;"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="systemItemNonInventory" class="tab-pane fade in">
                        <center>
                            <span id="loadingSystemItemNonInventory"></span>
                        </center>
                        <div id="systemItemNonInventoryGridDetail">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <div class="input-group  ">
                                        <span class="input-group-addon"><i class="fa fa-search"></i></span>
                                        <input type="text" class="form-control " id="searchSystemItemNonInventory" placeholder="Search...">
                                    </div>
                                </div>
                                <div class="panel-body">
                                    <div id="systemItemNonInventoryFlexGrid" class="grid" style="max-height: 250px;"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="systemItemPackage" class="tab-pane fade in">
                        <center>
                            <span id="loadingSystemItemPackage"></span>
                        </center>
                        <div id="systemItemPackageGridDetail">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <div class="input-group  ">
                                        <span class="input-group-addon"><i class="fa fa-search"></i></span>
                                        <input type="text" class="form-control " id="searchSystemItemPackage" placeholder="Search...">
                                    </div>
                                </div>
                                <div class="panel-body">
                                    <div id="systemItemPackageFlexGrid" class="grid" style="max-height: 250px;"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

            </div>

            <div class="modal-footer">
                <button id="" class="btn btn-danger " data-dismiss="modal"><i class="fa fa-close"></i> Close</button>
            </div>
        </div>
    </div>
</div>

@Scripts.Render("~/Scripts/Software-js")

<script type="text/javascript">
    var branchId = "@ViewData["BranchId"]";

    var systemItemInventoryCollectionView;
    var systemItemInventoryFlexGrid = new wijmo.grid.FlexGrid('#systemItemInventoryFlexGrid');
    var systemItemNonInventoryCollectionView;
    var systemItemNonInventoryFlexGrid = new wijmo.grid.FlexGrid('#systemItemNonInventoryFlexGrid');
    var systemItemPackageCollectionView;
    var systemItemPackageFlexGrid = new wijmo.grid.FlexGrid('#systemItemPackageFlexGrid');

    function menuSystemItemQuery_OnClick() {
        $('#systemItemQueryModal').modal({
            show: true,
            backdrop: 'static'
        });

        $("#loadingSystemItemInventory").show();
        document.getElementById("loadingSystemItemInventory").innerHTML = '<i class="fa fa-spinner fa-spin"></i>';
        $("#systemItemInventoryGridDetail").hide();

        $("#loadingSystemItemNonInventory").show();
        document.getElementById("loadingSystemItemNonInventory").innerHTML = '<i class="fa fa-spinner fa-spin"></i>';
        $("#systemItemNonInventoryGridDetail").hide();

        $("#loadingSystemItemPackage").show();
        document.getElementById("loadingSystemItemPackage").innerHTML = '<i class="fa fa-spinner fa-spin"></i>';
        $("#systemItemPackageGridDetail").hide();

        setTimeout(function () {
            createSystemItemInventoryGrid();
            createSystemItemNonInventoryGrid();
            createSystemItemPackageGrid();
        }, 500);
    }

    // ===============
    // Inventory Items
    // ===============
    function getSystemItemInventory() {
        var itemsObservableArray = new wijmo.collections.ObservableArray();
        $.ajax({
            url: '/api/listArticleInventoryBybranchId/' + branchId,
            cache: false,
            type: 'GET',
            contentType: 'application/json; charset=utf-8',
            success: function (articleInventoriesResults) {
                if (articleInventoriesResults.length > 0) {
                    for (i = 0; i < articleInventoriesResults.length; i++) {
                        itemsObservableArray.push({
                            Pick: "<button class='btn btn-primary btn-xs btn-block' onclick='cmdItemQueryPick_Onclick()'><i class='fa fa-hand-o-right'></i> Pick</button>",
                            Id: articleInventoriesResults[i]["Id"],
                            BranchId: articleInventoriesResults[i]["BranchId"],
                            Branch: articleInventoriesResults[i]["Branch"],
                            ArticleId: articleInventoriesResults[i]["ArticleId"],
                            Article: articleInventoriesResults[i]["Article"],
                            InventoryCode: articleInventoriesResults[i]["InventoryCode"],
                            Quantity: articleInventoriesResults[i]["Quantity"],
                            QuantityDisplay: parseFloat(articleInventoriesResults[i]["Quantity"]).toFixed(2).toLocaleString().replace(/\B(?=(\d{3})+(?!\d))/g, ","),
                            Price: articleInventoriesResults[i]["Price"],
                            PriceDisplay: parseFloat(articleInventoriesResults[i]["Price"]).toFixed(2).toLocaleString().replace(/\B(?=(\d{3})+(?!\d))/g, ","),
                            Cost: articleInventoriesResults[i]["Cost"],
                            Amount: articleInventoriesResults[i]["Amount"],
                            Particulars: articleInventoriesResults[i]["Particulars"],
                            ManualArticleCode: articleInventoriesResults[i]["ManualArticleCode"],
                            UnitId: articleInventoriesResults[i]["UnitId"],
                            Unit: articleInventoriesResults[i]["Unit"],
                            Inventory: articleInventoriesResults[i]["Inventory"],
                        });
                    }
                }

                $("#loadingSystemItemInventory").hide();
                $("#systemItemInventoryGridDetail").show();
            }
        });

        return itemsObservableArray;
    }
    function createSystemItemInventoryGrid() {
        systemItemInventoryCollectionView = new wijmo.collections.CollectionView(getSystemItemInventory());
        systemItemInventoryCollectionView.canFilter = true;

        var filterText = '';
        $('#searchSystemItemInventory').keyup(function () {
            filterText = this.value.toLowerCase();
            systemItemInventoryCollectionView.refresh();
        });

        systemItemInventoryCollectionView.filter = function (item) {
            return !filterText || (item.InventoryCode.toLowerCase().indexOf(filterText) > -1)
                || (item.ManualArticleCode.toLowerCase().indexOf(filterText) > -1)
                || (item.Article.toLowerCase().indexOf(filterText) > -1);
        }

        systemItemInventoryFlexGrid.dispose();
        systemItemInventoryFlexGrid = new wijmo.grid.FlexGrid('#systemItemInventoryFlexGrid');
        systemItemInventoryFlexGrid.initialize({
            columns: [
                        {
                            "header": "Inventory Code",
                            "binding": "InventoryCode",
                            "allowSorting": true,
                            "width": "2*"
                        },
                        {
                            "header": "Code",
                            "binding": "ManualArticleCode",
                            "allowSorting": true,
                            "width": "2*",
                        },
                        {
                            "header": "Item",
                            "binding": "Article",
                            "allowSorting": true,
                            "width": "3*",
                        },
                        {
                            "header": "Price",
                            "binding": "PriceDisplay",
                            "allowSorting": true,
                            "align": "right",
                            "width": "2*",
                        },
                        {
                            "header": "On Hand Quantity",
                            "binding": "QuantityDisplay",
                            "allowSorting": true,
                            "align": "right",
                            "width": "2*",
                        },
                        {
                            "header": "Unit",
                            "binding": "Unit",
                            "allowSorting": true,
                            "width": "2*",
                        }
            ],
            autoGenerateColumns: false,
            itemsSource: systemItemInventoryCollectionView,
            isReadOnly: true,
            autoSizeMode: wijmo.grid.AutoSizeMode.Both,
            allowDragging: wijmo.grid.AllowDragging.None,
            selectionMode: wijmo.grid.SelectionMode.Row
        });

        systemItemInventoryFlexGrid.trackChanges = true;
    }

    // ===================
    // Non Inventory Items
    // ===================
    function getSystemItemNonInventory() {
        var itemsObservableArray = new wijmo.collections.ObservableArray;
        $.ajax({
            url: '/api/article/list/ByNonInventory',
            cache: false,
            type: 'GET',
            contentType: 'application/json; charset=utf-8',
            success: function (itemResults) {
                if (itemResults.length > 0) {
                    for (i = 0; i < itemResults.length; i++) {
                        itemsObservableArray.push({
                            Pick: "<button class='btn btn-primary btn-xs btn-block' onclick='cmdItemQueryPickNonInventory_Onclick()'><i class='fa fa-hand-o-right'></i> Pick</button>",
                            Id: itemResults[i]["Id"],
                            ArticleCode: itemResults[i]["ArticleCode"],
                            ManualArticleCode: itemResults[i]["ManualArticleCode"],
                            Article: itemResults[i]["Article"],
                            Category: itemResults[i]["Category"],
                            ArticleTypeId: itemResults[i]["ArticleTypeId"],
                            ArticleType: itemResults[i]["ArticleType"],
                            ArticleGroupId: itemResults[i]["ArticleGroupId"],
                            ArticleGroup: itemResults[i]["ArticleGroup"],
                            AccountId: itemResults[i]["AccountId"],
                            Account: itemResults[i]["Account"],
                            SalesAccountId: itemResults[i]["SalesAccountId"],
                            CostAccountId: itemResults[i]["CostAccountId"],
                            AssetAccountId: itemResults[i]["AssetAccountId"],
                            ExpenseAccountId: itemResults[i]["ExpenseAccountId"],
                            UnitId: itemResults[i]["UnitId"],
                            Unit: itemResults[i]["Unit"],
                            OutputTaxId: itemResults[i]["OutputTaxId"],
                            InputTaxId: itemResults[i]["InputTaxId"],
                            WTaxTypeId: itemResults[i]["WTaxTypeId"],
                            Price: itemResults[i]["Price"],
                            PriceDisplay: parseFloat(itemResults[i]["Price"]).toFixed(2).toLocaleString().replace(/\B(?=(\d{3})+(?!\d))/g, ","),
                            Cost: itemResults[i]["Cost"],
                            IsInventory: itemResults[i]["IsInventory"],
                            Particulars: itemResults[i]["Particulars"],
                            Address: itemResults[i]["Address"],
                            TermId: itemResults[i]["TermId"],
                            ContactNumber: itemResults[i]["ContactNumber"],
                            ContactPerson: itemResults[i]["ContactPerson"],
                            TaxNumber: itemResults[i]["TaxNumber"],
                            CreditLimit: itemResults[i]["CreditLimit"],
                            DateAcquired: itemResults[i]["DateAcquired"],
                            UsefulLife: itemResults[i]["UsefulLife"],
                            SalvageValue: itemResults[i]["SalvageValue"],
                            ManualArticleOldCode: itemResults[i]["ManualArticleOldCode"],
                            IsLocked: itemResults[i]["IsLocked"],
                            CreatedById: itemResults[i]["CreatedById"],
                            CreatedBy: itemResults[i]["CreatedBy"],
                            CreatedDateTime: itemResults[i]["CreatedDateTime"],
                            UpdatedById: itemResults[i]["UpdatedById"],
                            UpdatedBy: itemResults[i]["UpdatedBy"],
                            UpdatedDateTime: itemResults[i]["UpdatedDateTime"]
                        });
                    }
                }

                $("#loadingSystemItemNonInventory").hide();
                $("#systemItemNonInventoryGridDetail").show();
            }
        });

        return itemsObservableArray;
    }
    function createSystemItemNonInventoryGrid() {
        systemItemNonInventoryCollectionView = new wijmo.collections.CollectionView(getSystemItemNonInventory());
        systemItemNonInventoryCollectionView.canFilter = true;

        var filterText = '';
        $('#InputFilterItemQueryGridNonInventory').keyup(function () {
            filterText = this.value.toLowerCase();
            systemItemNonInventoryCollectionView.refresh();
        });

        systemItemNonInventoryCollectionView.filter = function (item) {
            return !filterText || (item.ManualArticleCode.toLowerCase().indexOf(filterText) > -1)
                || (item.Article.toLowerCase().indexOf(filterText) > -1);
        }

        systemItemNonInventoryFlexGrid.dispose();
        systemItemNonInventoryFlexGrid = new wijmo.grid.FlexGrid('#systemItemNonInventoryFlexGrid');
        systemItemNonInventoryFlexGrid.initialize({
            columns: [
                {
                    "header": "Code",
                    "binding": "ManualArticleCode",
                    "allowSorting": true,
                    "width": "4*"
                },
                {
                    "header": "Item",
                    "binding": "Article",
                    "allowSorting": true,
                    "width": "5*"
                },
                {
                    "header": "Price",
                    "binding": "PriceDisplay",
                    "allowSorting": true,
                    "align": "right",
                    "width": "2*"
                }
            ],
            autoGenerateColumns: false,
            itemsSource: systemItemNonInventoryCollectionView,
            isReadOnly: true,
            autoSizeMode: wijmo.grid.AutoSizeMode.Both,
            allowDragging: wijmo.grid.AllowDragging.None,
            selectionMode: wijmo.grid.SelectionMode.Row
        });

        systemItemNonInventoryFlexGrid.trackChanges = true;
    }

    // =============
    // Package Items
    // =============
    function getSystemItemPackage() {
        var itemsObservableArray = new wijmo.collections.ObservableArray;
        $.ajax({
            url: '/api/article/list/byPackage',
            cache: false,
            type: 'GET',
            contentType: 'application/json; charset=utf-8',
            success: function (itemResults) {
                if (itemResults.length > 0) {
                    for (i = 0; i < itemResults.length; i++) {
                        itemsObservableArray.push({
                            Pick: "<button class='btn btn-primary btn-xs btn-block' onclick='cmdItemQueryPickPackage_Onclick()'><i class='fa fa-hand-o-right'></i> Pick</button>",
                            Id: itemResults[i]["Id"],
                            ArticleCode: itemResults[i]["ArticleCode"],
                            ManualArticleCode: itemResults[i]["ManualArticleCode"],
                            Article: itemResults[i]["Article"],
                            Category: itemResults[i]["Category"],
                            ArticleTypeId: itemResults[i]["ArticleTypeId"],
                            ArticleType: itemResults[i]["ArticleType"],
                            ArticleGroupId: itemResults[i]["ArticleGroupId"],
                            ArticleGroup: itemResults[i]["ArticleGroup"],
                            AccountId: itemResults[i]["AccountId"],
                            Account: itemResults[i]["Account"],
                            SalesAccountId: itemResults[i]["SalesAccountId"],
                            CostAccountId: itemResults[i]["CostAccountId"],
                            AssetAccountId: itemResults[i]["AssetAccountId"],
                            ExpenseAccountId: itemResults[i]["ExpenseAccountId"],
                            UnitId: itemResults[i]["UnitId"],
                            Unit: itemResults[i]["Unit"],
                            OutputTaxId: itemResults[i]["OutputTaxId"],
                            InputTaxId: itemResults[i]["InputTaxId"],
                            WTaxTypeId: itemResults[i]["WTaxTypeId"],
                            Price: itemResults[i]["Price"],
                            PriceDisplay: parseFloat(itemResults[i]["Price"]).toFixed(2).toLocaleString().replace(/\B(?=(\d{3})+(?!\d))/g, ","),
                            Cost: itemResults[i]["Cost"],
                            IsInventory: itemResults[i]["IsInventory"],
                            Particulars: itemResults[i]["Particulars"],
                            Address: itemResults[i]["Address"],
                            TermId: itemResults[i]["TermId"],
                            ContactNumber: itemResults[i]["ContactNumber"],
                            ContactPerson: itemResults[i]["ContactPerson"],
                            TaxNumber: itemResults[i]["TaxNumber"],
                            CreditLimit: itemResults[i]["CreditLimit"],
                            DateAcquired: itemResults[i]["DateAcquired"],
                            UsefulLife: itemResults[i]["UsefulLife"],
                            SalvageValue: itemResults[i]["SalvageValue"],
                            ManualArticleOldCode: itemResults[i]["ManualArticleOldCode"],
                            IsLocked: itemResults[i]["IsLocked"],
                            CreatedById: itemResults[i]["CreatedById"],
                            CreatedBy: itemResults[i]["CreatedBy"],
                            CreatedDateTime: itemResults[i]["CreatedDateTime"],
                            UpdatedById: itemResults[i]["UpdatedById"],
                            UpdatedBy: itemResults[i]["UpdatedBy"],
                            UpdatedDateTime: itemResults[i]["UpdatedDateTime"]
                        });
                    }
                }

                $("#loadingSystemItemPackage").hide();
                $("#systemItemPackageGridDetail").show();
            }
        });

        return itemsObservableArray;
    }
    function createSystemItemPackageGrid() {
        systemItemPackageCollectionView = new wijmo.collections.CollectionView(getSystemItemPackage());
        systemItemPackageCollectionView.canFilter = true;

        var filterText = '';
        $('#InputFilterItemQueryGridPackage').keyup(function () {
            filterText = this.value.toLowerCase();
            systemItemPackageCollectionView.refresh();
        });

        systemItemPackageCollectionView.filter = function (item) {
            return !filterText || (item.ManualArticleCode.toLowerCase().indexOf(filterText) > -1)
                || (item.Article.toLowerCase().indexOf(filterText) > -1);
        }

        systemItemPackageFlexGrid.dispose();
        systemItemPackageFlexGrid = new wijmo.grid.FlexGrid('#systemItemPackageFlexGrid');
        systemItemPackageFlexGrid.initialize({
            columns: [
                        {
                            "header": "Code",
                            "binding": "ManualArticleCode",
                            "allowSorting": true,
                            "width": "4*"
                        },
                        {
                            "header": "Item",
                            "binding": "Article",
                            "allowSorting": true,
                            "width": "5*"
                        },
                        {
                            "header": "Price",
                            "binding": "PriceDisplay",
                            "allowSorting": true,
                            "align": "right",
                            "width": "2*"
                        }
            ],
            autoGenerateColumns: false,
            itemsSource: systemItemPackageCollectionView,
            isReadOnly: true,
            autoSizeMode: wijmo.grid.AutoSizeMode.Both,
            allowDragging: wijmo.grid.AllowDragging.None,
            selectionMode: wijmo.grid.SelectionMode.Row
        });

        itemPackageFlexGrid.trackChanges = true;
    }
</script>